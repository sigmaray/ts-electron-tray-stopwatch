# Electron Stopwatch

Приложение секундомера на Electron с TypeScript и системным треем.

**Важно:** Приложение всегда запускается свернутым в системный трей. После запуска найдите иконку приложения в трее и кликните по ней, чтобы открыть окно.

## Функциональность

### Основные возможности

- **Секундомер** с точностью до сотых долей секунды (миллисекунды)
- **Кнопки управления**: Старт, Пауза, Стоп
- **Отображение времени** в формате `MM:SS.CC` (минуты:секунды.сотые) или `HH:MM:SS.CC` для больших значений
- **Автоматический запуск в трее**: приложение всегда запускается свернутым в системный трей

### Системный трей

- **Иконка в трее** отображает статус секундомера:
  - `—` (прочерк) - когда секундомер не запущен
  - `Xs` (секунды) - когда секундомер запущен и время < 60 секунд
  - `Xm` (минуты) - когда время < 60 минут
  - `X.Xh` (часы) - когда время >= 1 часа
  - `p` - когда секундомер на паузе
- **Tooltip** при наведении показывает текущее состояние и время
- **Левый клик** по иконке трея - показать/скрыть окно приложения
- **Двойной клик** по иконке трея - показать окно приложения
- **Контекстное меню** в трее:
  - "Показать" / "Свернуть в трей" - переключение видимости окна
  - "Выход" - закрытие приложения с подтверждением

### Управление окном

- При закрытии окна (крестик) приложение сворачивается в трей
- Кнопка "Свернуть в трей" в окне приложения
- Кнопка "Закрыть" в окне для полного закрытия приложения с подтверждением

## Установка

```bash
npm install
```

## Запуск

```bash
npm start
```

или

```bash
npm run dev
```

**Примечание:** После запуска приложение автоматически свернется в системный трей. Окно не будет отображаться автоматически. Чтобы открыть окно приложения, найдите иконку секундомера в системном трее и кликните по ней.

## Сборка

```bash
npm run build
```

## Сборка приложения

Для создания исполняемого файла:

```bash
npm run build:electron
```

Собранное приложение будет находиться в папке `release/`.

## Тестирование

Приложение включает E2E тесты на Playwright:

```bash
# Запуск тестов
npm run test:e2e

# Запуск тестов с UI
npm run test:e2e:ui

# Запуск тестов в видимом режиме
npm run test:e2e:headed
```

## Структура проекта

- `src/main.ts` - основной процесс Electron с логикой секундомера и трея
- `src/renderer.ts` - логика UI в renderer процессе
- `src/preload.ts` - мост для безопасной коммуникации между процессами
- `src/index.html` - HTML интерфейс приложения
- `tests/e2e/` - E2E тесты на Playwright

